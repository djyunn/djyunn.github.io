---
layout: post
title:  "Removing Multicollinearity"
date:   2020-12-25 15:17:36 +0530
categories: Statistics Multicollinearity
---

다중공선성 제거를 진행하였다.

![image-20201215152238316](C:\Users\ydj93\AppData\Roaming\Typora\typora-user-images\image-20201215152238316.png)

[djyunn/Statistics_tools](https://github.com/djyunn/Statistics_tools)

[[SPSS 23] 더미변수를 활용한 다중회귀분석(Multiple Regression Analysis with Dummy Variables)](http://blog.naver.com/PostView.nhn?blogId=y4769&logNo=220442966629)

공선성이란 ? 

- 하나의 독립변수가 다른 하나의 독립변수로 잘 예측되는 경우, 또는 서로 corr가 높은 경우

다중공선성이란?

- 하나의 독립변수가 다른 여러개의 독립변수로 잘 예측되는 경우

### 다중공선성의 문제점

- 특정 변수간의 연결고리(서로간 corr이 strong시) 때문에, 예측값의 분산이 엄청 커질 수 있음

    ![Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled.png](Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled.png)

- 데이터가 약간만 바뀌거나 변수가 약간만 바뀌어도 prediction값이 너무 크게 달라짐..! 따라서 stepwise등이 필요

[다중공선성](https://mindscale.kr/course/basic-stat-python/13)

### collinearity

- Data수에 비해 과다한 독립변수를 사용할 때
- 독립변수들간의 corr이 높을 때

### 기본적인 해결방법들

- **변수p-value가 유의미하면 VIF가 크더라도 pass**

[다중공선성](https://mindscale.kr/course/basic-stat-python/13)

[https://m.blog.naver.com/PostView.nhn?blogId=sanghan1990&logNo=221121607688&proxyReferer=https:%2F%2Fwww.google.com%2F](https://m.blog.naver.com/PostView.nhn?blogId=sanghan1990&logNo=221121607688&proxyReferer=https:%2F%2Fwww.google.com%2F)

1. 기본적인방법
- 각 입력변수를 제거/추가하며 coef의 fluctuation을 보며 판단
- corr가 높은 두 변수 중 하나를 제거
- var를 변형시키거나 dataset을 늘린다
- 현업 insight를 적용해 corr 높은 변수를 삭제 (customizing)

 2. 다른 방법

- PLS회귀분석: Partial Least Square라고 하며, 요인분석을 사용해 잠재변수를 찾고 이를 활용
- OLS회귀분석: VIF를 보며 삭제

### VIF(분산팽창요인 :variance inflation factors)

![Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled%201.png](Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled%201.png)

![Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled%202.png](Multicollinearity%20%E1%84%8C%E1%85%A6%E1%84%80%E1%85%A5%20f86319943883454a823821bb838d0bca/Untitled%202.png)

- VIF는 **수치형 변수**만을 써야함!!!!
- VIF란 분산팽창요인. VIFk는 k번째 변수의 다중공선성의 정도를 말함. R^2,k는 k번째 독립변수를 y로 하고 나머지 모든 변수를 독립변수로 하는 결정계수. 이를 통해 R^2,k값이 1에 가까울 수록 VIF는 커지게 되고, 다중공선성이 존재할 가능성이 증가!
- VIF가 10이상일 때 다중공선성이 존재
- Categorical var는 다중공선성이 존재하지 않는다.